# Logrotate configuration for TradingAgents

/app/logs/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 appuser appuser
    postrotate
        # Send USR1 signal to application to reopen log files
        /usr/bin/docker-compose exec backend kill -USR1 1 2>/dev/null || true
    endscript
}

/var/log/nginx/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 nginx nginx
    sharedscripts
    postrotate
        /usr/bin/docker-compose exec frontend nginx -s reopen 2>/dev/null || true
    endscript
}