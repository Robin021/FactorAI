# 快速启动指南 - 情绪分析功能

## 🚀 一键启动

### 1. 重启服务

```bash
# 如果使用Docker Compose
docker-compose restart backend frontend

# 或分别重启
docker-compose restart backend
docker-compose restart frontend
```

### 2. 验证配置

```bash
# 运行配置检查（应该全部✅）
python check_sentiment_config.py
```

### 3. 测试功能（可选）

```bash
# 运行功能测试
python test_sentiment_analysis.py
```

---

## ✅ 快速验证

### 方法1: 通过Web界面

1. 打开浏览器访问前端地址（通常是 `http://localhost:3000`）
2. 进入分析页面
3. 查看"分析师团队"部分，应该看到4个分析师卡片：
   - 📈 市场分析师
   - 📰 新闻分析师
   - 💰 基本面分析师
   - 📊 市场情绪分析师 ⭐ 新增
4. 提交一个测试分析（如 AAPL）
5. 等待分析完成，查看结果中是否包含"市场情绪报告"

### 方法2: 通过API测试

```bash
# 使用curl测试
curl -X POST http://localhost:8000/api/v1/analysis/start \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "stock_code": "AAPL",
    "market_type": "us"
  }'
```

---

## 📋 预期结果

### 前端界面

应该看到类似这样的界面：

```
┌─────────────────────────────────────────┐
│  👥 分析师团队                           │
│  系统将自动调用以下专业分析师团队...     │
│                                         │
│  ┌──────────────┐  ┌──────────────┐    │
│  │ 📈 市场分析师 │  │ 📰 新闻分析师 │    │
│  │ 技术面分析... │  │ 新闻事件...   │    │
│  └──────────────┘  └──────────────┘    │
│                                         │
│  ┌──────────────┐  ┌──────────────┐    │
│  │ 💰 基本面...  │  │ 📊 市场情绪... │   │
│  │ 财务数据...   │  │ 多维度情绪... │    │
│  └──────────────┘  └──────────────┘    │
└─────────────────────────────────────────┘
```

### 分析结果

分析完成后，结果中应该包含：

```json
{
  "market_report": "...",
  "news_report": "...",
  "fundamentals_report": "...",
  "market_sentiment_report": "# 市场情绪数据\n\n...",  ⭐ 新增
  "sentiment_score": 65.5,  ⭐ 新增
  ...
}
```

---

## 🔍 故障排查

### 问题1: 前端没有显示4个分析师

**检查**:
```bash
# 确认前端代码已更新
grep -n "market_sentiment" frontend/src/components/Analysis/AnalysisForm.tsx
```

**解决**:
```bash
# 重新构建前端
cd frontend
npm run build
docker-compose restart frontend
```

### 问题2: 分析结果没有情绪报告

**检查**:
```bash
# 确认后端配置已更新
grep -n "market_sentiment" backend/services/analysis_service.py
```

**解决**:
```bash
# 重启后端服务
docker-compose restart backend
```

### 问题3: 配置检查失败

**运行检查**:
```bash
python check_sentiment_config.py
```

**查看输出**，根据提示修复问题。

---

## 📊 功能说明

### 市场情绪分析提供什么？

1. **综合情绪评分** (0-100分)
   - 0-20: 极度悲观
   - 20-40: 悲观
   - 40-60: 中性
   - 60-80: 乐观
   - 80-100: 极度乐观

2. **多维度数据**
   - 新闻情绪
   - 价格动量
   - 成交量情绪
   - VIX恐慌指数（美股）
   - Reddit情绪（美股）
   - 北向资金（A股）
   - 融资融券（A股）
   - 南向资金（港股）

3. **组件贡献度分析**
   - 每个情绪组件的权重
   - 对综合评分的贡献

4. **极端情绪警告**
   - 当情绪过于乐观或悲观时的提示

---

## 🎯 使用建议

### 1. 首次使用

建议先测试美股（如AAPL），因为：
- 数据源最完整
- 包含VIX和Reddit数据
- 响应速度较快

### 2. 日常使用

- 每天早上查看关注股票的情绪评分
- 关注情绪评分的变化趋势
- 注意极端情绪警告

### 3. 投资决策

- 情绪评分作为参考指标之一
- 结合其他分析师的报告
- 不要单独依赖情绪评分

---

## 📚 更多信息

- **完整文档**: `docs/SENTIMENT_ANALYSIS_GUIDE.md`
- **功能说明**: `情绪分析功能说明.md`
- **前端更新**: `前端更新说明.md`
- **界面对比**: `界面对比说明.md`
- **完整总结**: `完整更新总结.md`

---

## ✨ 新功能亮点

### 对用户的好处

1. **更全面** - 新增情绪维度，分析更完整
2. **更简单** - 无需选择分析师，操作更便捷
3. **更专业** - 固定团队配置，结果更可靠
4. **更直观** - 量化评分，一目了然

### 对系统的好处

1. **更一致** - 所有分析使用相同配置
2. **更可靠** - 减少用户配置错误
3. **更易维护** - 统一的分析流程
4. **更易扩展** - 便于添加新的分析维度

---

## 🎉 开始使用

现在就重启服务，体验全新的市场情绪分析功能吧！

```bash
# 一键重启
docker-compose restart backend frontend

# 打开浏览器
open http://localhost:3000
```

**祝分析愉快！** 📈📊💰
