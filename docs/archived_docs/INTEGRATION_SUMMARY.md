# å¸‚åœºçƒ­åº¦åŠ¨æ€é£é™©æ§åˆ¶ - é›†æˆæ€»ç»“

## ğŸ‰ é›†æˆå®Œæˆï¼

å¸‚åœºçƒ­åº¦åŠ¨æ€é£é™©æ§åˆ¶ç³»ç»Ÿå·²æˆåŠŸé›†æˆåˆ°TradingAgentsä¸­ï¼

---

## ğŸ“¦ æ–°å¢æ–‡ä»¶æ¸…å•

### æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼ˆ6ä¸ªæ–‡ä»¶ï¼‰

1. **tradingagents/agents/utils/market_heat_calculator.py**
   - å¸‚åœºçƒ­åº¦è®¡ç®—å™¨
   - é‡åŒ–å¸‚åœºçƒ­åº¦ï¼ˆ0-100åˆ†ï¼‰
   - ç”Ÿæˆé£é™©æ§åˆ¶è°ƒæ•´å‚æ•°

2. **tradingagents/dataflows/market_heat_data.py**
   - å¸‚åœºçƒ­åº¦æ•°æ®æº
   - ä»AKShareè·å–å®æ—¶å¸‚åœºæ•°æ®
   - è®¡ç®—æ¶¨åœå®¶æ•°ã€æ¢æ‰‹ç‡ç­‰æŒ‡æ ‡

3. **tradingagents/agents/utils/market_heat_node.py**
   - å¸‚åœºçƒ­åº¦è¯„ä¼°èŠ‚ç‚¹
   - é›†æˆåˆ°åˆ†æå·¥ä½œæµ
   - å°†çƒ­åº¦ä¿¡æ¯å­˜å…¥state

### ä¿®æ”¹çš„æ–‡ä»¶ï¼ˆ4ä¸ªæ–‡ä»¶ï¼‰

4. **tradingagents/agents/utils/agent_states.py**
   - æ–°å¢ï¼šmarket_heat_score
   - æ–°å¢ï¼šmarket_heat_level
   - æ–°å¢ï¼šmarket_heat_data

5. **tradingagents/graph/conditional_logic.py**
   - æ–°å¢ï¼šenable_dynamic_risk_roundså‚æ•°
   - ä¿®æ”¹ï¼šshould_continue_risk_analysisæ–¹æ³•
   - å®ç°ï¼šåŠ¨æ€é£é™©è¾©è®ºè½®æ¬¡é€»è¾‘

6. **tradingagents/graph/setup.py**
   - æ–°å¢ï¼šMarket Heat EvaluatorèŠ‚ç‚¹
   - ä¿®æ”¹ï¼šå·¥ä½œæµä»å¸‚åœºçƒ­åº¦è¯„ä¼°å¼€å§‹

7. **tradingagents/agents/managers/risk_manager.py**
   - ä¿®æ”¹ï¼šåœ¨å†³ç­–promptä¸­åŒ…å«å¸‚åœºçƒ­åº¦ä¿¡æ¯
   - æ–°å¢ï¼šæ ¹æ®å¸‚åœºçƒ­åº¦è°ƒæ•´ä»“ä½å’Œæ­¢æŸå»ºè®®

### ç¤ºä¾‹å’Œæµ‹è¯•ï¼ˆ5ä¸ªæ–‡ä»¶ï¼‰

8. **examples/market_heat_example.py**
   - åŸºç¡€ä½¿ç”¨ç¤ºä¾‹
   - æ¼”ç¤ºä¸åŒå¸‚åœºçŠ¶æ€

9. **examples/market_heat_integration_example.py**
   - å®Œæ•´é›†æˆç¤ºä¾‹
   - æ¼”ç¤ºå®é™…åº”ç”¨åœºæ™¯

10. **tests/test_market_heat_integration.py**
    - å•å…ƒæµ‹è¯•
    - éªŒè¯åŠ¨æ€é£é™©è¾©è®º

11. **quick_test_market_heat.py**
    - å¿«é€Ÿæµ‹è¯•è„šæœ¬
    - éªŒè¯ç³»ç»Ÿæ˜¯å¦æ­£å¸¸å·¥ä½œ

12. **verify_market_heat_integration.py**
    - å®Œæ•´éªŒè¯è„šæœ¬
    - æµ‹è¯•æ‰€æœ‰é›†æˆç‚¹

### æ–‡æ¡£ï¼ˆ4ä¸ªæ–‡ä»¶ï¼‰

13. **docs/market_heat_guide.md**
    - è¯¦ç»†ä½¿ç”¨æŒ‡å—
    - å¸‚åœºçƒ­åº¦æŒ‡æ ‡è¯´æ˜

14. **docs/market_heat_integration_guide.md**
    - é›†æˆä½¿ç”¨æŒ‡å—
    - é…ç½®å’ŒAPIè¯´æ˜

15. **MARKET_HEAT_INTEGRATION.md**
    - é›†æˆå®ŒæˆæŠ¥å‘Š
    - æŠ€æœ¯ç»†èŠ‚å’Œæ•ˆæœ

16. **INTEGRATION_SUMMARY.md**
    - æœ¬æ–‡ä»¶
    - å¿«é€Ÿå‚è€ƒ

### è¾…åŠ©è„šæœ¬ï¼ˆ1ä¸ªæ–‡ä»¶ï¼‰

17. **run_analysis.py**
    - åˆ†æå¯åŠ¨è„šæœ¬
    - è§£å†³å¯¼å…¥è·¯å¾„é—®é¢˜

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. éªŒè¯é›†æˆ

```bash
# å®Œæ•´éªŒè¯ï¼ˆæ¨èï¼‰
python verify_market_heat_integration.py

# å¿«é€Ÿæµ‹è¯•
python quick_test_market_heat.py
```

### 2. æŸ¥çœ‹ç¤ºä¾‹

```bash
# åŸºç¡€ç¤ºä¾‹
python examples/market_heat_example.py

# é›†æˆç¤ºä¾‹
python examples/market_heat_integration_example.py

# æµ‹è¯•åŠ¨æ€è¾©è®º
python tests/test_market_heat_integration.py
```

### 3. è¿è¡Œåˆ†æ

```bash
# ä½¿ç”¨æ–°çš„å¯åŠ¨è„šæœ¬
python run_analysis.py --stock 601138

# æˆ–è€…ä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
python -m cli.main --stock 601138
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. è‡ªåŠ¨å¸‚åœºçƒ­åº¦è¯„ä¼°

æ¯æ¬¡åˆ†æå¼€å§‹æ—¶è‡ªåŠ¨ï¼š
- âœ… è·å–å®æ—¶å¸‚åœºæ•°æ®
- âœ… è®¡ç®—çƒ­åº¦è¯„åˆ†ï¼ˆ0-100ï¼‰
- âœ… ç¡®å®šçƒ­åº¦ç­‰çº§ï¼ˆ5ä¸ªç­‰çº§ï¼‰

### 2. åŠ¨æ€é£é™©è¾©è®º

æ ¹æ®å¸‚åœºçƒ­åº¦è‡ªåŠ¨è°ƒæ•´ï¼š
- ğŸ”¥ çƒ­åº¦ â‰¥ 60ï¼š**2è½®è¾©è®º**ï¼ˆå……åˆ†è®¨è®ºï¼‰
- â„ï¸ çƒ­åº¦ < 60ï¼š**1è½®è¾©è®º**ï¼ˆå¿«é€Ÿå†³ç­–ï¼‰

### 3. æ™ºèƒ½é£é™©æ§åˆ¶

è‡ªåŠ¨è°ƒæ•´ç­–ç•¥å‚æ•°ï¼š
- ğŸ“ˆ ä»“ä½å»ºè®®ï¼ˆ0.5x - 1.5xï¼‰
- ğŸ›¡ï¸ æ­¢æŸå»ºè®®ï¼ˆ0.7x - 1.5xï¼‰
- ğŸ’¡ ç­–ç•¥å»ºè®®ï¼ˆæ–‡æœ¬ï¼‰

---

## ğŸ“Š å½“å‰å¸‚åœºçŠ¶æ€

è¿è¡Œå¿«é€Ÿæµ‹è¯•æŸ¥çœ‹ï¼š
```bash
python quick_test_market_heat.py
```

ç¤ºä¾‹è¾“å‡ºï¼š
```
âœ… å¸‚åœºçƒ­åº¦è®¡ç®—æˆåŠŸ
   çƒ­åº¦è¯„åˆ†: 27.2 / 100
   çƒ­åº¦ç­‰çº§: å†·æ·¡
   é£é™©è¾©è®ºè½®æ¬¡: 1è½®

ğŸ’¡ å½“å‰å¸‚åœºç­–ç•¥å»ºè®®:
â„ï¸ å¸‚åœºäº¤æŠ•æ¸…æ·¡ï¼ˆçƒ­åº¦ï¼š27.2ï¼‰
å»ºè®®ï¼š
- é™ä½ä»“ä½è‡³70%å·¦å³
- é€‚å½“æ”¶ç´§æ­¢æŸ
- è°¨æ…æ“ä½œï¼Œå…³æ³¨å¸‚åœºæƒ…ç»ªå˜åŒ–
- é£é™©æ§åˆ¶é‡‡ç”¨ä¿å®ˆç­–ç•¥ï¼ˆ1è½®è¾©è®ºï¼‰
```

---

## ğŸ”§ é…ç½®é€‰é¡¹

### å¯ç”¨åŠ¨æ€é£é™©è¾©è®ºï¼ˆé»˜è®¤ï¼‰

ç³»ç»Ÿé»˜è®¤å¯ç”¨ï¼Œæ— éœ€é…ç½®ï¼

### ç¦ç”¨åŠ¨æ€é£é™©è¾©è®º

å¦‚æœéœ€è¦ä½¿ç”¨å›ºå®šè½®æ¬¡ï¼š

```python
from tradingagents.graph.conditional_logic import ConditionalLogic

logic = ConditionalLogic(
    max_debate_rounds=1,
    max_risk_discuss_rounds=2,  # å›ºå®š2è½®
    enable_dynamic_risk_rounds=False  # ç¦ç”¨
)
```

---

## ğŸ“ˆ æ•ˆæœå¯¹æ¯”

### åœºæ™¯1ï¼šç‰›å¸‚ï¼ˆçƒ­åº¦70ï¼‰

| ç­–ç•¥ | è¾©è®ºè½®æ¬¡ | ä»“ä½ | æ­¢æŸ |
|------|---------|------|------|
| ä¼ ç»Ÿå›ºå®š | 1è½® | 30% | 5% |
| åŠ¨æ€è°ƒæ•´ | **2è½®** â¬†ï¸ | **39%** â¬†ï¸ | **4%** â¬‡ï¸ |

**æ•ˆæœ**ï¼šå……åˆ†è®¨è®ºæœºä¼šï¼ŒæŠŠæ¡ç‰›å¸‚è¡Œæƒ…

### åœºæ™¯2ï¼šç†Šå¸‚ï¼ˆçƒ­åº¦30ï¼‰

| ç­–ç•¥ | è¾©è®ºè½®æ¬¡ | ä»“ä½ | æ­¢æŸ |
|------|---------|------|------|
| ä¼ ç»Ÿå›ºå®š | 1è½® | 30% | 5% |
| åŠ¨æ€è°ƒæ•´ | **1è½®** | **21%** â¬‡ï¸ | **6%** â¬†ï¸ |

**æ•ˆæœ**ï¼šå¿«é€Ÿå†³ç­–ï¼Œä¿æŠ¤èµ„é‡‘å®‰å…¨

---

## âœ… æµ‹è¯•ç»“æœ

æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼š

```
âœ… é€šè¿‡  æ¨¡å—å¯¼å…¥
âœ… é€šè¿‡  å¸‚åœºçƒ­åº¦è®¡ç®—
âœ… é€šè¿‡  å¸‚åœºæ•°æ®è·å–
âœ… é€šè¿‡  åŠ¨æ€é£é™©è¾©è®º
âœ… é€šè¿‡  å¸‚åœºçƒ­åº¦èŠ‚ç‚¹
âœ… é€šè¿‡  Stateç»“æ„

æ€»è®¡: 6/6 æµ‹è¯•é€šè¿‡
```

---

## ğŸ“š æ–‡æ¡£ç´¢å¼•

| æ–‡æ¡£ | ç”¨é€” |
|------|------|
| [å¸‚åœºçƒ­åº¦ä½¿ç”¨æŒ‡å—](docs/market_heat_guide.md) | è¯¦ç»†åŠŸèƒ½è¯´æ˜ |
| [é›†æˆä½¿ç”¨æŒ‡å—](docs/market_heat_integration_guide.md) | é…ç½®å’ŒAPI |
| [é›†æˆå®ŒæˆæŠ¥å‘Š](MARKET_HEAT_INTEGRATION.md) | æŠ€æœ¯ç»†èŠ‚ |
| [æœ¬æ–‡ä»¶](INTEGRATION_SUMMARY.md) | å¿«é€Ÿå‚è€ƒ |

---

## ğŸ“ å­¦ä¹ è·¯å¾„

### æ–°æ‰‹å…¥é—¨

1. è¿è¡Œå¿«é€Ÿæµ‹è¯•ï¼š`python quick_test_market_heat.py`
2. æŸ¥çœ‹åŸºç¡€ç¤ºä¾‹ï¼š`python examples/market_heat_example.py`
3. é˜…è¯»ä½¿ç”¨æŒ‡å—ï¼š`docs/market_heat_guide.md`

### è¿›é˜¶ä½¿ç”¨

1. æŸ¥çœ‹é›†æˆç¤ºä¾‹ï¼š`python examples/market_heat_integration_example.py`
2. è¿è¡Œå®Œæ•´åˆ†æï¼š`python run_analysis.py --stock 601138`
3. é˜…è¯»é›†æˆæŒ‡å—ï¼š`docs/market_heat_integration_guide.md`

### é«˜çº§å®šåˆ¶

1. æŸ¥çœ‹æºç ï¼š`tradingagents/agents/utils/market_heat_calculator.py`
2. ä¿®æ”¹é…ç½®ï¼š`tradingagents/graph/conditional_logic.py`
3. è‡ªå®šä¹‰æƒé‡å’Œé˜ˆå€¼

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: å¸‚åœºæ•°æ®è·å–å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**A**: ç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨é»˜è®¤å€¼ï¼ˆæ­£å¸¸å¸‚åœºï¼Œ1è½®è¾©è®ºï¼‰ï¼Œä¸å½±å“åˆ†ææµç¨‹ã€‚

### Q2: å¦‚ä½•ç¦ç”¨åŠ¨æ€é£é™©è¾©è®ºï¼Ÿ

**A**: åœ¨åˆ›å»ºConditionalLogicæ—¶è®¾ç½® `enable_dynamic_risk_rounds=False`

### Q3: å¦‚ä½•è°ƒæ•´çƒ­åº¦é˜ˆå€¼ï¼Ÿ

**A**: ä¿®æ”¹ `conditional_logic.py` ä¸­çš„é˜ˆå€¼ï¼ˆé»˜è®¤60åˆ†ï¼‰

### Q4: å¯¼å…¥é”™è¯¯æ€ä¹ˆåŠï¼Ÿ

**A**: ä½¿ç”¨ `python run_analysis.py` è€Œä¸æ˜¯ `python cli/main.py`

---

## ğŸ”„ ç‰ˆæœ¬ä¿¡æ¯

- **ç‰ˆæœ¬**: v1.0.0
- **é›†æˆæ—¥æœŸ**: 2025-10-29
- **çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª
- **å…¼å®¹æ€§**: å®Œå…¨å‘åå…¼å®¹

---

## ğŸ‰ æ€»ç»“

### è§£å†³çš„é—®é¢˜

âœ… **é‡åŒ–äº†å¸‚åœºçƒ­åº¦**
- 6ä¸ªç»´åº¦ï¼Œ0-100åˆ†è¯„åˆ†
- 5ä¸ªç­‰çº§ï¼Œæ¸…æ™°æ˜ç¡®

âœ… **åŠ¨æ€è°ƒæ•´é£é™©æ§åˆ¶**
- å¸‚åœºçƒ­æ—¶ï¼š2è½®è¾©è®ºï¼Œå……åˆ†è®¨è®º
- å¸‚åœºå†·æ—¶ï¼š1è½®è¾©è®ºï¼Œå¿«é€Ÿå†³ç­–

âœ… **è‡ªåŠ¨é€‚åº”å¸‚åœºå˜åŒ–**
- æ¯æ¬¡åˆ†æé‡æ–°è¯„ä¼°
- è‡ªåŠ¨å‡çº§/é™çº§ç­–ç•¥

âœ… **å®Œå…¨é›†æˆåˆ°ç³»ç»Ÿ**
- æ— éœ€é¢å¤–é…ç½®
- è‡ªåŠ¨ç”Ÿæ•ˆ
- å‘åå…¼å®¹

### æ ¸å¿ƒä»·å€¼

è¿™ä¸ªç³»ç»Ÿè§£å†³äº†"ä¸€åˆ€åˆ‡"é£é™©æ§åˆ¶çš„æ ¹æœ¬é—®é¢˜ï¼š

- **ç‰›å¸‚æ—¶**ï¼šä¸å†å› ä¸ºè¿‡äºä¿å®ˆè€Œé”™å¤±æœºä¼š
- **ç†Šå¸‚æ—¶**ï¼šä¸å†å› ä¸ºè¿‡äºæ¿€è¿›è€ŒæŸå¤±æƒ¨é‡
- **éœ‡è¡æ—¶**ï¼šä¿æŒæ ‡å‡†ç­–ç•¥ï¼Œç¨³å¥æ“ä½œ

**æœ€é‡è¦çš„æ˜¯**ï¼šè¿™ä¸€åˆ‡éƒ½æ˜¯è‡ªåŠ¨çš„ï¼Œä¸éœ€è¦äººå·¥åˆ¤æ–­ï¼

---

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- æ–‡æ¡£ï¼š`docs/market_heat_integration_guide.md`
- ç¤ºä¾‹ï¼š`examples/market_heat_integration_example.py`
- æµ‹è¯•ï¼š`python verify_market_heat_integration.py`

---

**é›†æˆå®Œæˆ** âœ… | **æµ‹è¯•é€šè¿‡** âœ… | **ç”Ÿäº§å°±ç»ª** âœ…
